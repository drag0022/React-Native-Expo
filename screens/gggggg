import React, { useState, useEffect } from 'react';
import LottieView from 'lottie-react-native';
import {
	StyleSheet,
	Text,
	View,
	SafeAreaView,
	ActivityIndicator,
} from 'react-native';
import * as Cellular from 'expo-cellular';
import { backgroundColor } from 'react-native/Libraries/Components/View/ReactNativeStyleAttributes';
import { Center } from 'native-base';
import { Card } from 'react-native-elements';

export default function NetworkCellular() {
	const [voip, setVoip] = useState(false);
	const [carrier, setCarrier] = useState(null);
	const [generation, setGeneration] = useState(0);
	const [isShowingLoader, setIsShowingLoader] = useState(false);
	
	useEffect(() => {
		setIsShowingLoader(true);
		setTimeout(async () => {
			setIsShowingLoader(false);
			setVoip(await Cellular.allowsVoipAsync());
			setCarrier(await Cellular.getCarrierNameAsync());
			setGeneration(await Cellular.getCellularGenerationAsync());
		}, 5000);
	}, []);

	return !isShowingLoader ? (
		<SafeAreaView style={styles.safeArea} >
			<View style={styles.phonecard}>
				<Card title="Phone Information">
					<Text style={styles.text2}>
						{voip
							? 'Your Phone can make phone calls.'
							: 'Your phone cannot make phone calls. You must be using a simulator'}
					</Text>
					<Text style={styles.text2}>Your Carrier Is: {carrier}</Text>
					<Text style={styles.text2}>
						Your phone is capable of {generation === 0 ? 'Simulator' : generation}{' '}
						connectivity. WOW!
					</Text>
					</Card>
			</View>
		</SafeAreaView>
	) : (
		<View style={styles.container} >
			<Text style={styles.text}>Hacking your phone...</Text>
			<LottieView
          style={{
            width: 400,
            height: 400,
            color: '#5c374c',
          }}
          source={require('../assets/lf30_editor_fvdnvkqk.json')}
					autoPlay loop
        />
		</View>
	);
}

const styles = StyleSheet.create({
	safeArea:{
		flexDirection: 'column',
		alignContent: 'center',
		padding: 20,
		backgroundColor: '#d3d3d370',
		borderRadius: 5,
		height: 700,
		margin: 10,
		alignContent: 'center',
		borderWidth: 0.2,
		borderBottomColor: '#A10582',
		borderBottomWidth: 8,
	},
	container:{
		flex: 1,
			alignItems: 'center',
			justifyContent: 'center',
			paddingTop: 40,
			backgroundColor: '#ecf0f1',
			borderRadius:20,
			shadowColor: "rgba(1, 1, 0, .5)",
			shadowOffset: { width: 4, height: 8 },
			shadowOpacity: 0.25,
			shadowRadius: 12,
			height:500,
	},
	phonecard:{
	
			alignItems: 'center',
			justifyContent: 'center',
			paddingTop: 40,
			backgroundColor: 'red',
			borderRadius:20,
			shadowColor: "rgba(1, 1, 0, .5)",
			shadowOffset: { width: 4, height: 8 },
			shadowOpacity: 0.25,
			shadowRadius: 12,
			height:300},
	text: {
		paddingTop: 15,
		alignItems: 'center',
		fontWeight: '700',
		fontSize: 20,
		color: '#A10582',
		marginLeft: 10,
	},
	text2: {
		paddingTop: 45,
		alignContent:'center',
		alignItems: 'center',
		fontWeight: '300',
		fontSize: 25,
		marginLeft: 10,
		color:'#A10582'
	},
	card:{
		borderRadius:20,
		shadowColor: "rgba(1, 1, 0, .5)",
    shadowOffset: { width: 4, height: 8 },
    shadowOpacity: 0.25,
    shadowRadius: 12,
		height:500,
		color:'green'
	}

});
